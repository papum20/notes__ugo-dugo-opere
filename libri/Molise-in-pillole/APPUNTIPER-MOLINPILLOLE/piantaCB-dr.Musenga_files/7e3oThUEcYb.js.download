if (self.CavalryLogger) { CavalryLogger.start_js(["Duw\/9EH"]); }

__d("ReQLTable.bs",["bs_curry"],(function(a,b,c,d,e,f){"use strict";c={};d={};function a(a,c,d){return a.get(c).then(function(e){return a.upsert(c,b("bs_curry")._1(d,e))})}f.Direction=c;f.Index=d;f.update=a}),null);
__d("LSDataTraceCheckPoint.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];d=[0,10];e=[0,11];b=[0,12];var g=[0,13],h=[0,20],i=[0,21],j=[0,22],k=[0,30],l=[0,31],m=[0,32],n=[0,33],o=[0,34],p=[0,35],q=[0,36],r=[0,37],s=[0,38],t=[0,39],u=[0,40],v=[0,41],w=[0,42],x=[0,43],y=[0,44],z=[0,45],A=[0,50],B=[0,51],C=[0,52],D=[0,53],E=[0,60],F=[0,61],G=[0,62],H=[0,63],I=[0,64],J=[0,65],K=[0,70],L=[0,71],M=[0,72],N=[0,80],O=[0,81],P=[0,82],Q=[0,83],R=[0,84],S=[0,85],T=[0,98],U=[0,99],V=[0,100],W=[0,101],X=[0,102],Y=[0,103],Z=[0,104],$=[0,105],aa=[0,106],ba=[0,107],ca=[0,108],da=[0,109],ea=[0,110],fa=[0,111],ga=[0,112],ha=[0,113],ia=[0,114],ja=[0,115],ka=[0,116],la=[0,200],ma=[0,201],na=[0,202],oa=[0,203],pa=[0,204],qa=[0,205],ra=[0,300],sa=[0,301],ta=[0,1400],ua=[0,1401],va=[0,1402],wa=[0,1403],xa=[0,1404],ya=[0,1405],za=[0,1406],Aa=[0,1407],Ba=[0,1410],Ca=[0,1411],Da=[0,1412],Ea=[0,1413],Fa=[0,1414],Ga=[0,1415],Ha=[0,1416],Ia=[0,1417],Ja=[0,1418],Ka=[0,1419],La=[0,1420],Ma=[0,1421],Na=[0,1422],Oa=[0,1423],Pa=[0,1424],Qa=[0,1425],Ra=[0,1426],Sa=[0,1427],Ta=[0,1428];f.clientDbOutbound=a;f.clientNetworkOutbound=c;f.clientNetworkInbound=d;f.clientDbInbound=e;f.clientEvaluateDasm=b;f.clientAppStateChange=g;f.clientCreateTask=h;f.clientRecipientPresence=i;f.clientEvaluateDasmBegin=j;f.mqttPublish=k;f.mqttPublishAck=l;f.mqttDisconnected=m;f.mqttConnecting=n;f.mqttConnected=o;f.mqttConnectionAcked=p;f.tincanReceiveMessage=q;f.tincanReceiveDecryptionComplete=r;f.tincanReceiveDecryptionFailed=s;f.tincanReceiveDrQueued=t;f.tincanReceiveDrSentToNetwork=u;f.tincanReceiveDrPublishToMqtt=v;f.tincanReceiveDrmqttPuback=w;f.tincanReceiveBounceTaskQueued=x;f.tincanReceiveBounceTaskSentToNetwork=y;f.tincanReceiveBounceTaskPublishToMqtt=z;f.richMediaDownloadStart=A;f.richMediaDownloadEnd=B;f.richMediaDownloadError=C;f.richMediaUploadStart=D;f.armadilloAct=E;f.armadilloActTaskPick=F;f.armadilloActSerialize=G;f.armadilloActGroupSend=H;f.armadilloActSendFailure=I;f.armadilloActMessageSend=J;f.networkDisconnected=K;f.networkConnected=L;f.networkUnknown=M;f.flowCreat=N;f.flowEnd=O;f.flowInterrupted=P;f.flowConnectId=Q;f.flowEndForFailure=R;f.flowEndAndFlush=S;f.traceCreated=T;f.clientReadyToFlush=U;f.pendingDelta=V;f.noPendingDelta=W;f.initSync=X;f.resnapshot=Y;f.catchUp=Z;f.periodicSync=$;f.catchUpFromRevision=aa;f.resnapshotContinue=ba;f.resnapshotEnd=ca;f.periodicSyncContinue=da;f.periodicSyncEnd=ea;f.contactSyncOptimistic=fa;f.contactSyncFromOmnistore=ga;f.contactSyncTamOptimistc=ha;f.contactSyncTamFromOmnistore=ia;f.contactSyncTamError=ja;f.verifyUserForSync=ka;f.receiveDeliveryReceipt=la;f.taskDeserializationError=ma;f.optimisicMessageFailed=na;f.sendServerAuthoritative=oa;f.threadRangeQueryComplete=pa;f.threadRangeQueryFailure=qa;f.xmsTransportMessageSendStart=ra;f.xmsTransportMessageSendFail=sa;f.labyrinthInitializeBackupSproc=ta;f.labyrinthInitializeBackupSuccessSproc=ua;f.labyrinthInitializeBackupFailure=va;f.labyrinthCreateBackupMailboxSproc=wa;f.labyrinthHandleCreateBackupMailboxSuccessSproc=xa;f.labyrinthOpenEpochSproc=ya;f.labyrinthHandlerOpenEpochSuccessSproc=za;f.labyrinthHandlerOpenEpochFailureSproc=Aa;f.labyrinthCreateVirtualDeviceSproc=Ba;f.labyrinthHandleCreateVirtualDeviceSuccessSproc=Ca;f.labyrinthHandleCreateVirtualDeviceFailureSproc=Da;f.labyrinthAddDeviceSproc=Ea;f.labyrinthAddDeviceFromVirtualSproc=Fa;f.labyrinthHandoleWrongRecoveryCodeSproc=Ga;f.labyrinthHandleAddDeviceSuccessSproc=Ha;f.labyrinthHandleAddDeviceFailureSproc=Ia;f.labyrinthInitializeRestoreSproc=Ja;f.labyrinthDecryptThreadsSproc=Ka;f.labyrinthRequestMessagesFromThreadsSproc=La;f.labyrinthRequestMessagesFromRangeQuerySproc=Ma;f.labyrinthDecryptMessagesSproc=Na;f.labyrinthDeleteBackupOnClientSproc=Oa;f.labyrinthDeleteBackupsSproc=Pa;f.labyrinthHandleDeleteMailboxSproc=Qa;f.labyrinthIssueDeleteBackupTaskSproc=Ra;f.labyrinthBackupUploadBegin=Sa;f.labyrinthBackupUploadSuccessSproc=Ta}),null);
__d("LSFlushDataTrace.bs",["LS.bs","LSAppendDataTraceAddon","LSDataTraceCheckPoint.bs","ReQL.bs","ReQLTable","ReQLTable.bs","bs_caml_int64","bs_curry","gkx","killswitch","requireDeferred","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("requireDeferred")("LSDataTraceFlush.bs").__setRef("LSFlushDataTrace.bs");function h(a,c){return b("LSAppendDataTraceAddon")(c,b("LSDataTraceCheckPoint.bs").clientReadyToFlush,b("bs_caml_int64").neg_one,void 0,void 0,b("bs_curry")._1(b("LS.bs").make,a)).then(function(d){return b("ReQLTable.bs").update(b("ReQLTable").table(a,"data_trace_meta"),{hd:c,tl:0},function(a){if(a!==void 0)return{a:a.a,b:a.b,c:a.c,d:a.d,e:!0,f:a.f,g:a.g,h:a.h,i:a.i};else return b("unrecoverableViolation")("Data trace is missing "+c,"messenger_web_product")}).then(function(d){return g.load().then(function(d){return b("bs_curry")._2(d.flush,a,c)})})})}function a(a,c,d){if(!b("killswitch")("MESSENGER_WEB_DATA_TRACE_ID")&&b("gkx")("1951030"))return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(a,"data_trace_meta").asc,{hd:d,tl:0})).then(function(b){if(b!==void 0)return h(a,d);else return window.Promise.resolve(void 0)});else return window.Promise.resolve(void 0)}f.$LSDataTraceFlush$Deferred=g;f.updateAndFlushTrace=h;f.call=a}),null);